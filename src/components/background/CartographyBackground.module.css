/* =====================================================
   ROOT LAYER
===================================================== */

.cartography {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;

  /* Prevent accent color bleed */
  color: var(--carto-ink, #000000);
}

.svg {
  width: 100%;
  height: 100%;
  display: block;
  
}


.stars {
  mix-blend-mode: screen;
}





/* =====================================================
   PLANET SYSTEM
===================================================== */

.planets {
  pointer-events: none;
}

.planetLarge,
.planetSmall {
  mix-blend-mode: normal;
  transition: filter 300ms ease;
}

/* Angle-aware shadowing */
.planetShadow {
  transform-origin: center;
  transform: rotate(var(--nova-large-angle, 0deg));
  opacity: calc(0.55 * var(--nova-large-influence, 0));
}

/* Angle-aware specular */
.planetSpecular {
  transform-origin: center;
  transform: rotate(var(--nova-large-angle, 0deg));
  opacity: calc(0.75 * var(--nova-large-influence, 0));
}


/* =====================================================
   SUPERNOVA SYSTEM
===================================================== */

.supernova {
  mix-blend-mode: screen;
  pointer-events: none;

  transition: opacity 0.6s ease-out;
  opacity: var(--nova-pulse, 0);
}


/* =====================================================
   SHOOTING STARS
===================================================== */

.shootingStar {
  stroke: white;
  stroke-width: 2;
  opacity: 0.9;

  stroke-linecap: round;

  animation: shooting 2.5s ease-out infinite;
}

@keyframes shooting {
  from {
    stroke-dasharray: 0 200;
    opacity: 1;
  }
  to {
    stroke-dasharray: 200 200;
    opacity: 0;
  }
}


/* =====================================================
   SATELLITE FLYBYS
===================================================== */

.satellite {
  fill: white;
  opacity: 0.8;

  animation: satelliteFly 8s linear infinite;
}

@keyframes satelliteFly {
  from {
    transform: translateX(-40px);
  }
  to {
    transform: translateX(1480px);
  }
}


/* =====================================================
   SECTOR MARKERS
===================================================== */

.sectorMarkers {
  pointer-events: none;
}

.marker {
  transform-origin: center;

  animation: markerPulse 4s ease-in-out infinite;
}

@keyframes markerPulse {
  0% {
    opacity: 0.6;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.25);
  }
  100% {
    opacity: 0.6;
    transform: scale(1);
  }
}


/* =====================================================
   CONSTELLATIONS
===================================================== */

.constellation {
  opacity: 0.72;
  transition: opacity 400ms ease;

  mix-blend-mode: screen;
}


/* =====================================================
   ACTIVE CATEGORY HIGHLIGHTING
===================================================== */

.highlighted {
  opacity: 1;
  transition: opacity 300ms ease;
}

.dimmed {
  opacity: 0.25;
  transition: opacity 300ms ease;
}


/* =====================================================
   PERFORMANCE / REDUCED MOTION
===================================================== */

@media (prefers-reduced-motion: reduce) {
  .shootingStar,
  .satellite,
  .marker,
  .supernova {
    animation: none;
  }

  .constellation {
    transition: none;
  }
}


/* =====================================================
   RESPONSIVE TUNING
===================================================== */

@media (max-width: 1024px) {
  .starsNear {
    opacity: 0.65;
  }

  .starsMid {
    opacity: 0.5;
  }
}

@media (max-width: 640px) {
  .starsNear {
    opacity: 0.55;
  }

  .starsMid {
    opacity: 0.45;
  }

  .constellation {
    opacity: 0.55;
  }
}


/* =====================================================
   THEME SAFEGUARDS
===================================================== */

:global(html[data-theme="dark"]) .cartography {
  /* map ink, NOT star ink*/
  color: #7e879c;
}

:global(html[data-theme="light"]) .cartography {
  color: #333c48; /* Dark Ink */
}

:global(html[data-theme="light"]) .svg {
  background: #f4f1ea; /* Paper */
}


/* =====================================================
   LIGHT THEME PLACEHOLDERS (for CartographySvgLight)
===================================================== */

.starsLight {
  opacity: 0.5;
}

.blueprintGrid {
  opacity: 0.6;
}

:global(html[data-theme="light"]) .orbits {
  opacity: 0.45;
}

/* ==============================================
   LIGHT THEME MOTION SYSTEM
============================================== */

.radarSystemLight {
  opacity: 0.4;
  mix-blend-mode: multiply;
  animation: lightScan 18s linear infinite;
}

@keyframes lightScan {
  from {
    transform: translateX(-200px);
  }
  to {
    transform: translateX(1600px);
  }
}

.pulse {
  animation: sectorPulse 6s ease-in-out infinite;
}

@keyframes sectorPulse {
  0% {
    opacity: 0.2;
    transform: scale(1);
  }
  50% {
    opacity: 0.45;
    transform: scale(1.08);
  }
  100% {
    opacity: 0.2;
    transform: scale(1);
  }
}

/* Motion safety */
@media (prefers-reduced-motion: reduce) {
  .radarSystemLight,
  .pulse {
    animation: none;
  }
}

/* ==============================================
   CATEGORY TACTICAL COLOR SYSTEM
============================================== */

:global(html[data-theme="light"]) .sectorMarkers {
  color: var(--tactical-neutral);
}

/* Category overrides */
:global(html[data-theme="light"]) .sector-people .marker {
  color: var(--tactical-people);
}

:global(html[data-theme="light"]) .sector-planets .marker {
  color: var(--tactical-planets);
}

:global(html[data-theme="light"]) .sector-films .marker {
  color: var(--tactical-films);
}

:global(html[data-theme="light"]) .sector-starships .marker {
  color: var(--tactical-starships);
}

:global(html[data-theme="light"]) .sector-vehicles .marker {
  color: var(--tactical-vehicles);
}

:global(html[data-theme="light"]) .sector-species .marker {
  color: var(--tactical-species);
}

/* Tactical alert language */
.map-alert {
  color: var(--tactical-alert);
}

.map-warning {
  color: var(--tactical-warning);
}

.map-ok {
  color: var(--tactical-ok);
}

/* ==============================================
   MAP INTERACTION STATES
============================================== */

.highlighted {
  opacity: 1;
  filter: brightness(1.2) contrast(1.1);
  transition: all 300ms ease;
}

.dimmed {
  opacity: 0.22;
  filter: grayscale(0.6);
  transition: all 300ms ease;
}

/* Sector markers respond strongly */
.highlighted .marker {
  animation: markerPulseStrong 2s ease-in-out infinite;
}

@keyframes markerPulseStrong {
  0% {
    transform: scale(1);
    opacity: 0.9;
  }
  50% {
    transform: scale(1.5);
    opacity: 1;
  }
  100% {
    transform: scale(1);
    opacity: 0.9;
  }
}